{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["// src/middleware.ts – Auth middleware (edge-efficient; best practice: Early env check to avoid runtime crashes in dev/prod)\nimport { createServerClient } from '@supabase/ssr';\nimport { type NextRequest, NextResponse } from 'next/server';\n\nexport async function middleware(req: NextRequest) {\n  // Logic: Env guard (push back: Fail fast if vars missing – best for dev; fixes \"required\" error on hot reloads)\n  if (!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\n    console.error('Supabase env vars missing – check .env.local');\n    return NextResponse.next();  // Or redirect to error page in prod\n  }\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n    { cookies: {\n      getAll: () => req.cookies.getAll(),\n      setAll: (cookiesToSet) => {\n        const response = NextResponse.next();\n        cookiesToSet.forEach(({ name, value, options }) => response.cookies.set(name, value, options));\n        return response;\n      },\n    } }\n  );  // Logic: ssr client (async-safe sessions – no old helpers)\n\n  const { data: { session } } = await supabase.auth.getSession();  // Logic: Await fetch (async-safe)\n\n  if (!session && !req.nextUrl.pathname.startsWith('/auth')) {\n    return NextResponse.redirect(new URL('/auth/signin', req.url));\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: ['/((?!_next/static|_next/image|favicon.ico|api|auth).*)'],  // Logic: Protect non-static/auth (optimizes)\n};"],"names":[],"mappings":"AAAA,4HAA4H;;;;;;;AAC5H;AAAA;AACA;AAAA;;;AAEO,eAAe,WAAW,GAAgB;IAC/C,gHAAgH;IAChH;;IAKA,MAAM,WAAW,IAAA,oTAAkB,sUAGjC;QAAE,SAAS;YACT,QAAQ,IAAM,IAAI,OAAO,CAAC,MAAM;YAChC,QAAQ,CAAC;gBACP,MAAM,WAAW,+YAAY,CAAC,IAAI;gBAClC,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBACrF,OAAO;YACT;QACF;IAAE,IACA,2DAA2D;IAE/D,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,IAAK,kCAAkC;IAEnG,IAAI,CAAC,WAAW,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU;QACzD,OAAO,+YAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,IAAI,GAAG;IAC9D;IAEA,OAAO,+YAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAyD;AACrE"}}]
}