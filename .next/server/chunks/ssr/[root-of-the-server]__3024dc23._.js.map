{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/components/ui/progress.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Progress = registerClientReference(\n    function() { throw new Error(\"Attempted to call Progress() from the server but Progress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/progress.tsx <module evaluation>\",\n    \"Progress\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,WAAW,IAAA,udAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,gEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/components/ui/progress.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Progress = registerClientReference(\n    function() { throw new Error(\"Attempted to call Progress() from the server but Progress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/progress.tsx\",\n    \"Progress\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,WAAW,IAAA,udAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,4CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/lib/supabaseServer.ts"],"sourcesContent":["// src/lib/supabaseServer.ts – Async Supabase server client helper (best practice: Wrap for Next 15 async cookies – fixes sync-dynamic-apis warnings; centralized for reuse in actions/layout; added autoRefresh false to avoid sets in components)\nimport { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\nimport type { Database } from '@/types/database.types'; // Keep your types\n\nexport async function createSupabaseServerClient() {\n  const cookieStore = await cookies(); // Logic: Await dynamic cookies (Next 15 requirement – avoids sync errors)\n  return createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false, // Logic: Disable auto-refresh in server components (prevents token set during getSession – fixes cookie modify error; refresh in actions/middleware)\n        persistSession: false, // Logic: No persist on server (session is per-request)\n      },\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value; // Logic: Sync get after await (safe)\n        },\n        set(name: string, value: string, options: any) {\n          try {\n            cookieStore.set({ name, value, ...options }); // Logic: No await needed (set is sync)\n          } catch (error) {\n            // The `set` method was called from a Server Action. Ignore – middleware will refresh session on next request.\n            // Logic: No logging here (expected noise in Next.js 15+ with Supabase SSR during token refresh attempts; the try-catch safely ignores it per docs – unblocks cleanly without clutter; push back: If debugging needed, add console.warn only in dev via process.env.NODE_ENV)\n          }\n        },\n        remove(name: string, options: any) {\n          try {\n            cookieStore.set({ name, value: '', ...options }); // Logic: Remove via empty set\n          } catch (error) {\n            // Ignored as above\n          }\n        },\n      },\n    }\n  );\n}"],"names":[],"mappings":"AAAA,mPAAmP;;;;;AACnP;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,yVAAO,KAAI,0EAA0E;IAC/G,OAAO,IAAA,4SAAkB,sUAGvB;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;QACA,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO,OAAO,qCAAqC;YAC5E;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAY;gBAC3C,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC,IAAI,uCAAuC;gBACvF,EAAE,OAAO,OAAO;gBACd,8GAA8G;gBAC9G,6QAA6Q;gBAC/Q;YACF;YACA,QAAO,IAAY,EAAE,OAAY;gBAC/B,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC,IAAI,8BAA8B;gBAClF,EAAE,OAAO,OAAO;gBACd,mBAAmB;gBACrB;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/lib/actions.ts"],"sourcesContent":["// src/lib/actions.ts – Updated with async Supabase (align with layout fix; keeps Propstream CSV ready – test upload post-restart)\n'use server'; // Logic: Marks as server-only (no client bundle bloat – optimizes for internal app with leads/calls)\nimport { PrismaClient } from '@prisma/client';  // Your DB client (async-safe in actions)\nimport { redirect } from 'next/navigation'; // Server redirect (reliable – no client hacks; best for post-auth flow to dashboard quests)\nimport Papa from 'papaparse'; // Logic: CSV parser (handles headers, errors – best for Propstream exports)\nimport Twilio from 'twilio'; // Logic: Twilio SDK for outbound calls (inexpensive, reliable integration)\nimport { z } from 'zod';  // Validation (type-safe inputs – prevents junk data in DB; no-brainer for prod)\nimport crypto from 'crypto';  // Built-in hash (no extra deps – for address_hash dedup)\nimport { createSupabaseServerClient } from '@/lib/supabaseServer'; // Use async helper (fixes warnings in actions too)\nimport type { Database } from '@/types/database.types'; // Types (autocompletes e.g., session.user.id for Prisma sync – now fixed via your gen)\n\nconst prisma = new PrismaClient();  // Global instance (efficient in Next.js actions – auto-closes; push back: Cache in lib/prisma.ts for hot reloads if issues)\n\nconst twilioClient = Twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN); // Logic: Init Twilio (guard env in prod)\n\nconst importSchema = z.object({\n  source: z.literal('propstream'), // Logic: Locked to Propstream for now (expand later)\n});  // Logic: Zod for form (file handled separately)\n\n// Action: Sign in (logic: Basic stub – expand with your original zod/email/password validation; centralized for type-safety)\nexport async function signInAction(formData: FormData) {\n  const email = formData.get('email')?.toString() ?? '';\n  const password = formData.get('password')?.toString() ?? '';\n  // ... (add your validation/error returns here; e.g., zod schema for email/password)\n  const supabase = await createSupabaseServerClient(); // Logic: Async client (Next 15 safe)\n  const { data: { session }, error } = await supabase.auth.signInWithPassword({ email, password });\n  if (error) {\n    return { error: error.message };\n  }\n\n  // Auto-create profile if none exists (step 3 fix: No-brainer for robustness – ensures every logged-in user has a gamification profile; prevents null errors in dashboard/layout; push back: If using Supabase signup hooks, move there for new users only, but this covers all logins safely)\n  if (session?.user.id) {\n    const existingProfile = await prisma.profile.findUnique({ where: { id: session.user.id } });\n    if (!existingProfile) {\n      await prisma.profile.create({\n        data: {\n          id: session.user.id, // PK matches auth user ID\n          user_id: session.user.id, // 1:1 FK to auth.users\n          role: 'novice', // Default enum (gamify: Start at base level)\n          points: 0,\n          badges: [], // Empty array\n        },\n      });\n    }\n  }\n\n  redirect('/dashboard'); // Logic: Post-login to HQ (quests await!)\n}\n\n// Action: Sign out (logic: Centralized mutation – avoids serialization issues in layout; redirects to signin)\nexport async function signOutAction() {\n  const supabase = await createSupabaseServerClient(); // Logic: Async client (consistent fix)\n  await supabase.auth.signOut(); // Logic: Clears session (middleware will redirect unauthed requests)\n  redirect('/auth/signin'); // Logic: Post-signout flow (back to login – update to '/' if public landing needed)\n}\n\n// Action: Import from Propstream CSV (logic: Parse file → per-row extract/map → batch upsert properties/create leads – returns results for UX)\nexport async function importDataAction(formData: FormData) {\n  const validated = importSchema.safeParse({\n    source: formData.get('source')?.toString() ?? 'propstream',\n  });\n  if (!validated.success) {\n    return { error: validated.error.format() };\n  }\n  const file = formData.get('file') as File | null; // Logic: Get uploaded CSV (from dropzone/form)\n  if (!file) {\n    return { error: 'No file uploaded' };\n  }\n  // Parse CSV (papaparse – async, handles large files stream-like)\n  const csvText = await file.text();\n  const parsed = Papa.parse(csvText, { header: true, skipEmptyLines: true, dynamicTyping: true }); // Logic: Headers on (maps to objects), auto-type numbers\n  if (parsed.errors.length > 0) {\n    return { error: `CSV parse errors: ${parsed.errors.map(e => e.message).join('; ')}` }; // Logic: Early feedback (e.g., malformed rows)\n  }\n  const rows = parsed.data as Record<string, any>[]; // Logic: Typed rows (Propstream columns like 'Property Address', 'AVM', etc.)\n  const supabase = await createSupabaseServerClient(); // Logic: Hoist session fetch outside loop/transaction (efficiency – avoids redundant calls per row; best practice for batch actions)\n  const { data: { user } } = await supabase.auth.getUser(); // Logic: Switch to getUser() (secure server-verified fetch – fixes \"insecure getSession\" warning; use for auth guards/user.id; push back: For full session tokens, keep getSession() if needed elsewhere, but this suffices for most checks)\n  if (!user?.id) {\n    return { error: 'No session – login required' };\n  }\n  const results = await Promise.allSettled(rows.map(async (row, index) => { // Logic: Parallel for speed; settled for per-row errors\n    try {\n      // Map Propstream columns to schema (flexible – handle variants/missing; added equity/mortgage for creative financing—calculate `equity_percent` if not direct)\n      const propertyTypeMap: Record<string, PropertyType> = { // Logic: Dict for safe enum mapping (pushback: Better than lowercase assume – handles variants)\n        'single family': 'single_family',\n        'multi family': 'multi_family',\n        'condo': 'condo',\n        'townhouse': 'townhouse',\n        'land': 'land',\n        'commercial': 'commercial',\n        // Add more mappings as needed; default 'other'\n      };\n      const extracted = {\n        address: row['Property Address']?.trim() || null,\n        city: row['City']?.trim() || null,\n        state: row['State']?.toUpperCase() || null, // Logic: Standardize to 2-letter\n        zip_code: row['Zip']?.trim() || null,\n        property_type: propertyTypeMap[row['Property Type']?.toLowerCase() || ''] || 'other',\n        bedrooms: Number(row['Bedrooms']) || null,\n        bathrooms: Number(row['Bathrooms']) || null,\n        square_feet: Number(row['Sq Ft']) || null, // Logic: Common variant 'Sq Ft' over 'Square Feet'\n        lot_size: Number(row['Lot Sq Ft']) || null,\n        year_built: Number(row['Year Built']) || null,\n        avm: Number(row['AVM']) || null,\n        tax_assessed_value: Number(row['Tax Assessed Value']) || null,\n        distress_signals: { // Logic: Expand for more signals if in CSV (e.g., 'High Equity')\n          pre_foreclosure: row['Pre-Foreclosure'] === 'Y' || false,\n        },\n        owner_occupied: row['Owner Occupied'] === 'Y' || null,\n        metadata: { // Logic: Store extras like equity/mortgage for creative financing quests\n          equity_percent: Number(row['Equity %']) || null,\n          mortgage_balance: Number(row['Mortgage Balance']) || null,\n          propstream_row: row, // Full audit\n        },\n      };\n\n      if (!extracted.address || !extracted.city || !extracted.state || !extracted.zip_code) {\n        throw new Error(`Invalid address components in row ${index + 1} – skipping`);\n      }\n\n      const addressHash = crypto.createHash('sha256').update(`${extracted.address.toLowerCase()}${extracted.city.toLowerCase()}${extracted.state.toLowerCase()}${extracted.zip_code}`).digest('hex'); // Logic: Hash full components for better dedup\n\n      // Transaction: Upsert property + create lead + increment points (atomic – best for gamification integrity)\n      const [property, lead] = await prisma.$transaction(async (tx) => {\n        const prop = await tx.properties.upsert({\n          where: { address_hash: addressHash },\n          update: { ...extracted, updated_at: new Date() }, // Logic: Partial update (merge); force timestamp\n          create: { address_hash: addressHash, ...extracted },\n        });\n\n        const ld = await tx.leads.create({\n          data: {\n            properties_id: prop.id,\n            lead_type: row['Lead Type']?.toLowerCase() as LeadType || 'owner', // Logic: Map to enum\n            first_name: row['Owner First Name'] || null,\n            last_name: row['Owner Last Name'] || null,\n            phone: row['Phone 1'] || null, // Logic: 'Phone 1' common; expand for multiples\n            source: 'propstream_import' as LeadSource,\n            metadata: extracted.metadata,\n            assigned_to: user.id, // Logic: Use user.id from getUser() (secure)\n            points_earned: 1, // Logic: Per-lead base (gamify: bonus for batch size later)\n          },\n        });\n\n        await tx.profile.update({\n          where: { id: user.id }, // Logic: Secure id from getUser()\n          data: { points: { increment: 1 } }, // Logic: Accumulate (tie to quests, e.g., if rows.length >50, extra badge)\n        });\n\n        return [prop, ld];\n      });\n\n      return { row: index + 1, leadId: lead.id, success: true };\n    } catch (error) {\n      console.error(`Import error for row ${index + 1}:`, error); // Logic: Server log for debug (client gets summary)\n      return { row: index + 1, success: false, error: (error as Error).message };\n    }\n  }));\n\n  const importResults = results.map(r => r.status === 'fulfilled' ? r.value : { success: false, error: (r.reason as Error).message }); // Logic: Flatten for client (e.g., success count)\n\n  // Gamification Trigger: Batch-based quest (e.g., if >50 successful imports, complete a \"Bulk Import\" quest – assume quest ID 'bulk-import-quest-id' exists; seed if not)\n  const successfulImports = importResults.filter(r => r.success).length;\n  if (successfulImports > 50) {\n    await prisma.quest_completions.create({\n      data: {\n        quest_id: 'bulk-import-quest-id', // Logic: Replace with real ID (create quest: title=\"Bulk Import 50+ Leads\", points=100, criteria={min_imports:50})\n        profile_id: user.id, // Logic: Secure id\n        evidence: { total_imports: successfulImports, points_awarded: 100 },\n      },\n    });\n    // Pushback: Also update profile badges here if quest unlocks one (e.g., push 'Bulk Importer' to badges array)\n    await prisma.profile.update({\n      where: { id: user.id },\n      data: { badges: { push: 'Bulk Importer' }, points: { increment: 100 } },\n    });\n  }\n\n  return { results: importResults };\n}\n\n// Action: Dial lead (logic: Twilio outbound call – from your Twilio number to lead phone; logs to calls table)\nexport async function dialLeadAction(leadId: string) { // Logic: String for UUID (matches schema)\n  try {\n    const lead = await prisma.leads.findUnique({ where: { id: leadId }, include: { properties: true } });\n    if (!lead?.phone) {\n      throw new Error('No phone for lead');\n    }\n\n    const supabase = await createSupabaseServerClient(); // Logic: Async client\n    const { data: { user } } = await supabase.auth.getUser(); // Logic: Switch to getUser() (fixes warning)\n    if (!user?.id || lead.assigned_to !== user.id) {\n      throw new Error('Unauthorized or mismatched assignment');\n    }\n\n    // Twilio outbound (phone-to-phone; expand to browser via Voice SDK if web calls needed)\n    const call = await twilioClient.calls.create({\n      to: lead.phone, // Lead's number\n      from: process.env.TWILIO_PHONE_NUMBER!, // Your Twilio number\n      url: 'http://your-domain.com/api/twiml', // Logic: TwiML endpoint (create /api/twiml route for voice response – e.g., <Say>Hello, connecting to lead</Say>)\n      statusCallback: 'http://your-domain.com/api/call-status', // Logic: Webhook for metrics (update calls table on complete)\n      statusCallbackEvent: ['initiated', 'ringing', 'answered', 'completed'], // Track status\n    });\n\n    // Log call (for metrics/quests – expand with webhook for duration/points)\n    await prisma.calls.create({\n      data: {\n        leads_id: lead.id,\n        caller_id: user.id, // Logic: Secure id\n        call_sid: call.sid, // Twilio ID for tracking\n        status: 'initiated',\n        metadata: { address: lead.properties.address },\n      },\n    });\n\n    return { success: true, callId: call.sid };\n  } catch (error) {\n    console.error('Dial error:', error);\n    return { success: false, error: (error as Error).message };\n  }\n}\n\n// Helper: Stubbed extractFromLink (removed for pivot – mock for non-CSV if needed)\n// async function extractFromLink(...) { return { /* mock data */ }; } // Comment out Zillow logic"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/lib/prisma.ts"],"sourcesContent":["// src/lib/prisma.ts – Prisma singleton (best practice: Avoids new instances per request – reduces latency/overhead for quest updates; push back: Raw imports risk exhaustion on Supabase as reps grow)\nimport { PrismaClient } from '@prisma/client';\n\nlet prisma: PrismaClient;\n\nif (process.env.NODE_ENV === 'production') {\n  prisma = new PrismaClient();  // Prod: Single instance (efficient scale for leaderboards/queries)\n} else {\n  if (!globalThis.prisma) {\n    globalThis.prisma = new PrismaClient();  // Dev: Global persists across HMR (hot reload – no reconnections on code changes)\n  }\n  prisma = globalThis.prisma;\n}\n\nexport default prisma;  // Logic: Export for server use (type-safe, e.g., prisma.profile.findUnique autocompletes points/role)"],"names":[],"mappings":"AAAA,uMAAuM;;;;;AACvM;;AAEA,IAAI;AAEJ;;KAEO;IACL,IAAI,CAAC,WAAW,MAAM,EAAE;QACtB,WAAW,MAAM,GAAG,IAAI,6IAAY,IAAK,kFAAkF;IAC7H;IACA,SAAS,WAAW,MAAM;AAC5B;uCAEe;CAAS,sGAAsG","debugId":null}},
    {"offset": {"line": 526, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/app/layout.tsx"],"sourcesContent":["// src/app/layout.tsx – Root layout (SSR for session fetch; gamified header with role/XP – updated for async Supabase)\nimport Link from 'next/link';\nimport { Progress } from '@/components/ui/progress'; // Assuming Shadcn\nimport { signOutAction } from '@/lib/actions'; // Import server action (bound for form)\nimport prisma from '@/lib/prisma'; // Shared singleton\nimport { createSupabaseServerClient } from '@/lib/supabaseServer'; // Import async helper (fixes warnings)\nimport type { Database } from '@/types/database.types';\n\nexport default async function RootLayout({ children }: { children: React.ReactNode }) {\n  const supabase = await createSupabaseServerClient(); // Logic: Await async client (Next 15 compatible – no sync warnings)\n\n  const { data: { user } } = await supabase.auth.getUser(); // Logic: Switch to getUser() (secure verification with Supabase server – fixes \"insecure getSession\" warning; best practice for prod/internal apps to prevent tampering; push back: Use this for user.id/role fetches, as it's authenticated vs. local cookie-based getSession())\n\n  // Fetch profile for gamification (role/points – plain data only)\n  let role = 'guest';\n  let xp = 0;\n  if (user?.id) {\n    const profile = await prisma.profile.findUnique({ where: { id: user.id } }); // Logic: profiles (match schema; assumes generate ran)\n    role = profile?.role || 'rep';\n    xp = profile?.points || 0;\n  }\n\n  return (\n    <html lang=\"en\">\n      <body>\n        <header>\n          <nav>\n            <div>\n              <span>Role: {role}</span>\n              <Progress value={(xp / 1000) * 100} className=\"w-32\" /> {/* Logic: XP bar (gamified progress – tie to levels) */}\n              {user ? ( // Logic: Check user instead of session (consistent with getUser())\n                <form action={signOutAction}> {/* Logic: Bind server action (no inline async – avoids serialization) */}\n                  <button type=\"submit\">Logout</button>\n                </form>\n              ) : (\n                <Link href=\"/auth/signin\">Login</Link>\n              )}\n            </div>\n          </nav>\n        </header>\n        {children}\n      </body>\n    </html>\n  );\n}"],"names":[],"mappings":"AAAA,sHAAsH;;;;;;AACtH;AACA,uOAAqD,kBAAkB;AACvE,4MAA+C,wCAAwC;AACvF,0MAAmC,mBAAmB;AACtD,0NAAmE,uCAAuC;;;;;;;AAG3F,eAAe,WAAW,EAAE,QAAQ,EAAiC;IAClF,MAAM,WAAW,MAAM,IAAA,0JAA0B,KAAI,oEAAoE;IAEzH,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI,kRAAkR;IAE5U,iEAAiE;IACjE,IAAI,OAAO;IACX,IAAI,KAAK;IACT,IAAI,MAAM,IAAI;QACZ,MAAM,UAAU,MAAM,+HAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE,IAAI,KAAK,EAAE;YAAC;QAAE,IAAI,uDAAuD;QACpI,OAAO,SAAS,QAAQ;QACxB,KAAK,SAAS,UAAU;IAC1B;IAEA,qBACE,6bAAC;QAAK,MAAK;kBACT,cAAA,6bAAC;;8BACC,6bAAC;8BACC,cAAA,6bAAC;kCACC,cAAA,6bAAC;;8CACC,6bAAC;;wCAAK;wCAAO;;;;;;;8CACb,6bAAC,gJAAQ;oCAAC,OAAO,AAAC,KAAK,OAAQ;oCAAK,WAAU;;;;;;gCAAS;gCACtD,qBACC,6bAAC;oCAAK,QAAQ,sIAAa;;wCAAE;sDAC3B,6bAAC;4CAAO,MAAK;sDAAS;;;;;;;;;;;yDAGxB,6bAAC,sXAAI;oCAAC,MAAK;8CAAe;;;;;;;;;;;;;;;;;;;;;;gBAKjC;;;;;;;;;;;;AAIT","debugId":null}}]
}