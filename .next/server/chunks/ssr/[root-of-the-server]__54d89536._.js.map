{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/app/auth/signup/action.ts"],"sourcesContent":["// src/app/auth/signup/actions.ts – Server actions for signup (separate file for 'use server' – best practice: Keeps client/server code clean, avoids parse errors in mixed files; future-proof for adding more actions like quest completion)\n'use server';  // Logic: Marks as server-only (runs on server – secure DB ops; must be first line to avoid 'not at top' error)\n\nimport { revalidatePath } from 'next/cache';  // For cache invalidation (optimizes post-signup dashboard load – fresh data without manual refresh)\nimport prisma from '@/lib/prisma';  // Prisma singleton (logic: Relational profile creation for gamification init – best for scale as reps grow)\n\nexport async function createInitialProfile(userId: string) {\n  await prisma.profile.create({\n    data: {\n      userId,  // Logic: Links to Supabase user.id (UUID – enables efficient joins for quests/leaderboards, e.g., top points by role)\n      role: 'Novice',  // Logic: Initial role (gamification start – unlock 'Apprentice' at 1000 points via future API threshold check)\n      points: 0,  // Logic: Start at zero (earn via quests like Zillow scrapes or CallRail logs – increment in API routes)\n      badges: [],  // Logic: Empty array (add strings like 'LeadScraper' on quest completion – queryable for badges leaderboard)\n    },\n  });\n  revalidatePath('/dashboard');  // Logic: Invalidates cache (ensures dashboard shows fresh profile data post-signup – best for seamless flow after redirect)\n}"],"names":[],"mappings":";;;;;;;IAMsB,uBAAA,WAAA,GAAA,IAAA,+eAAA,EAAA,8CAAA,oeAAA,EAAA,KAAA,GAAA,0eAAA,EAAA","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/wraelen/wraelen/wraelen-internal-boilerplate/src/app/auth/signup/page.tsx"],"sourcesContent":["// src/app/auth/signup/page.tsx – Signup form (client-side for interactivity; base Supabase client for browser mutations – best for Next.js 15+ pivot, async-safe without deprecated helpers)\n'use client';  // Logic: Client component (best for form state – no SSR overhead for inputs; push back: Add server actions for mutations if scaling auth heavy)\n\nimport { createClient } from '@supabase/supabase-js';  // Base package client (no helpers – lighter, future-proof; uses NEXT_PUBLIC vars for browser)\nimport Link from 'next/link';  // Added: For login link (fast nav – best for flow between signup/signin)\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport { createInitialProfile } from 'src/app/auth/signup/action.ts';  // Server action import (logic: Call for profile creation – secure, atomic after Supabase signup)\n\nexport default function SignUp() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  // Logic: Client-side creation (best practice: Use base createClient for browser – env vars available via process.env.NEXT_PUBLIC_*; no cookies needed on client as sessions persist via localStorage/JWT)\n  const supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,  // Logic: Required (throws if missing – guard in dev if needed, but Next.js loads .env.local auto)\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const { data: { user }, error } = await supabase.auth.signUp({ email, password });  // Logic: Supabase native signup (hashing/JWT auto – no custom logic needed; adds user to Supabase auth table)\n    if (error) {\n      setError(error.message);  // UX: Friendly feedback for flow (e.g., \"Email in use\" or \"Password too weak\" – improves onboarding experience for new reps)\n    } else if (user) {\n      await createInitialProfile(user.id);  // Server action call (logic: Creates linked Prisma profile immediately after signup – atomic to ensure gamification data (role/points) is ready for first dashboard load; best for consistency)\n      router.push('/dashboard');  // Logic: Redirect to HQ (smooth, client-side – best for game-like navigation after signup)\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-black text-green-400 font-mono\">\n      <form onSubmit={handleSignUp} className=\"p-8 border-2 border-green-500 rounded-lg shadow-[0_0_15px_rgba(0,255,0,0.7)] bg-black/80\">\n        <h2 className=\"text-2xl mb-6 text-center\">Join Wraelen HQ</h2>\n        {error && <p className=\"text-red-500 mb-4\">{error}</p>}  // Logic: Conditional error (best for UX – clear, non-blocking; allows quick retries)\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"w-full mb-4 p-2 bg-black border border-green-500 text-green-400 focus:outline-none focus:border-green-300\"\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"w-full mb-6 p-2 bg-black border border-green-500 text-green-400 focus:outline-none focus:border-green-300\"\n        />\n        <button type=\"submit\" className=\"w-full p-2 bg-green-500 text-black hover:bg-green-600\">Sign Up</button>\n        <p className=\"mt-4 text-center\">Already have an account? <Link href=\"/auth/signin\" className=\"underline hover:text-green-300\">Login</Link></p>  // Logic: Link to signin (fast nav – improves flow for existing reps)\n      </form>\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,6LAA6L;;;;;;AAG7L,4gBAAuD,8FAA8F;AACrJ,+rBAA+B,yEAAyE;AACxG;AACA;AACA,gXAAuE,iGAAiG;AANxK,cAAe,gJAAgJ;;;;;;;AAQhJ,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,idAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,idAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,idAAQ,EAAgB;IAClD,MAAM,SAAS,IAAA,+YAAS;IAExB,0MAA0M;IAC1M,MAAM,WAAW,IAAA,kUAAY;IAK7B,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;YAAE;YAAO;QAAS,IAAK,8GAA8G;QAClM,IAAI,OAAO;YACT,SAAS,MAAM,OAAO,GAAI,6HAA6H;QACzJ,OAAO,IAAI,MAAM;YACf,MAAM,IAAA,6OAAoB,EAAC,KAAK,EAAE,GAAI,gMAAgM;YACtO,OAAO,IAAI,CAAC,eAAgB,2FAA2F;QACzH;IACF;IAEA,qBACE,8eAAC;QAAI,WAAU;kBACb,cAAA,8eAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,8eAAC;oBAAG,WAAU;8BAA4B;;;;;;gBACzC,uBAAS,8eAAC;oBAAE,WAAU;8BAAqB;;;;;;gBAAW;8BACvD,8eAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,WAAU;;;;;;8BAEZ,8eAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,WAAU;;;;;;8BAEZ,8eAAC;oBAAO,MAAK;oBAAS,WAAU;8BAAwD;;;;;;8BACxF,8eAAC;oBAAE,WAAU;;wBAAmB;sCAAyB,8eAAC,uaAAI;4BAAC,MAAK;4BAAe,WAAU;sCAAiC;;;;;;;;;;;;gBAAgB;;;;;;;;;;;;AAItJ","debugId":null}}]
}